<!doctype html><meta charset="utf-8">
<title>Canon · Coach · Student — Receipts</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<script type="module"
  src="https://cdn.jsdelivr.net/gh/terryncew/openline-core@main/receipts-kit/openline-card.js">
</script>
<style>
  :root{--bg:#fafafa;--ink:#111;--line:#eee;--muted:#666}
  body{font:16px/1.5 system-ui,-apple-system,Segoe UI,Helvetica,Arial;margin:28px;background:var(--bg);color:var(--ink)}
  h1{margin:0 0 10px}
  .grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(320px,1fr))}
  .box{background:#fff;border:1px solid var(--line);border-radius:12px;padding:14px}
  .muted{color:var(--muted);font-size:12px}
</style>

<h1>Canon · Coach · Student</h1>
<p class="muted">Law is global. Style is local. Shadow → judge by Canon → (maybe) adopt.</p>

<div class="grid">
  <div class="box">
    <h3 style="margin:0 0 6px">Canon (Law)</h3>
    <openline-card id="canon-card" mode="compact"></openline-card>
    <div id="canon-src" class="muted">src: (probing…)</div>
  </div>

  <div class="box">
    <h3 style="margin:0 0 6px">Tuning Receipt (latest)</h3>
    <openline-card id="tuning-card" mode="compact"></openline-card>
    <div id="tuning-src" class="muted">src: (probing…)</div>
  </div>

  <div class="box">
    <h3 style="margin:0 0 6px">Latest</h3>
    <openline-card id="latest-card" mode="compact"></openline-card>
    <div id="latest-src" class="muted">src: (probing…)</div>
  </div>
</div>

<script>
async function resolveAndSet(cardId, labelId, candidates){
  const bust = '?v=' + Date.now();
  for (const base of candidates){
    const url = base + bust;
    try {
      const res = await fetch(url, { cache:'no-store' });
      if (res.ok) {
        document.getElementById(cardId).setAttribute('src', url);
        document.getElementById(labelId).textContent = 'src: ' + base;
        return true;
      }
    } catch(e){}
  }
  document.getElementById(labelId).textContent = 'src: not found (check file path / Pages deploy)';
  return false;
}

// Try common variants for each artifact.
// Adjust order if you know your generator’s exact filenames.
resolveAndSet('canon-card',  'canon-src',  [
  './canon.json', './receipts/canon.json', './canon/law.json'
]);

resolveAndSet('tuning-card', 'tuning-src', [
  './tuning.latest.json', './receipts/tuning.latest.json',
  './tuning.json', './receipts/tuning.json'
]);

resolveAndSet('latest-card', 'latest-src', [
  './receipt.latest.json', './receipts/receipt.latest.json',
  './latest.json'
]);
</script>
